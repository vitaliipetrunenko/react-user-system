{"version":3,"sources":["components/userboard/userprofiles/UserProfiles.module.css","components/header/Header.module.css","components/login/Login.module.css","components/dashboard/Dashboard.module.css","components/dashboard/Dashboard.jsx","redux/actionCreators.js","components/login/Login.jsx","components/userboard/userprofiles/ProfileBox.jsx","components/userboard/userprofiles/UserProfiles.jsx","components/userboard/Userboard.jsx","components/header/Header.jsx","components/controlpanel/UserBox.jsx","components/controlpanel/ControlPanel.jsx","App.js","hooks/useToken.js","reportWebVitals.js","redux/authReducer.js","redux/profilesReducer.js","redux/redux-store.js","index.js"],"names":["module","exports","Dashboard","useState","users","pofiles","matureProfiles","stats","setStats","useEffect","console","log","fetch","method","headers","body","then","data","json","res","profiles","className","styl","setUserAC","User","type","user","setProfilesAC","loginUser","credentials","a","JSON","stringify","regUser","Login","connect","state","ownProps","setToken","props","username","setUserName","name","setName","password","setPassword","role","setRole","operation","setOperation","handleSubmit","e","preventDefault","alert","token","email","getProfiles","result","loginWrapper","onSubmit","onChange","target","value","id","checked","htmlFor","submitButton","ProfileBoxHOC","surname","setSurname","age","setAge","profileChange","author","currUser","box","alt","src","parseInt","onClick","profile","ContainerUserProfiles","authData","profileList","profileData","currProfiles","wantedUser","userboxes","map","el","_id","Userboard","addButton","boxGrid","AdminUserboard","location","useLocation","setWantedUser","wantedProfile","Header","adminPhoto","userPhoto","Buttons","to","pathname","clearToken","UserBoxHOC","mail","setMail","fetchUsers","setUsers","catch","err","ControlPanelHOC","Users","UserList","i","loadUserFromToken","fetchUser","App","setTokenAC","getToken","tokenString","localStorage","getItem","parse","userToken","setItem","removeItem","renewToken","useToken","expiry","Date","getTime","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","SET_USER","SET_TOKEN","defaultUsers","authReducer","action","SET_PROFILES","defaultProfiles","profileReducer","reducers","combineReducers","store","createStore","ReactDOM","render","getState","dispatch","bind","document","getElementById"],"mappings":"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","file":"static/js/main.5b9431c2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Userboard\":\"UserProfiles_Userboard__2aU5Z\",\"addButton\":\"UserProfiles_addButton__Kvj31\",\"boxGrid\":\"UserProfiles_boxGrid__yR2QL\",\"box\":\"UserProfiles_box__uECKc\",\"submitButton\":\"UserProfiles_submitButton__2h4H9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__DlE4a\",\"User\":\"Header_User__sI2_r\",\"user\":\"Header_user__3SMjS\",\"adminPhoto\":\"Header_adminPhoto__1yISi\",\"userPhoto\":\"Header_userPhoto__2M3EZ\",\"Buttons\":\"Header_Buttons__1Oqka\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginWrapper\":\"Login_loginWrapper__1vxml\",\"submitButton\":\"Login_submitButton__19lq8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dashboard\":\"Dashboard_Dashboard__3nbQf\"};","import React, { useEffect,useState } from 'react';\r\nimport styl from './Dashboard.module.css'\r\n\r\nexport function  getStats(){\r\n  console.log(\"stage1\")\r\n  return fetch('/api/stats',{method:\"POST\",\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  },\r\n  body:null\r\n}).then(data => \r\n      data.json())\r\n}\r\n\r\nexport default function Dashboard() {\r\n    const [stats,setStats]=useState({users:0,pofiles:0,matureProfiles:0});\r\n    useEffect(()=>{\r\n        //setStats()\r\n        getStats().then(res =>{\r\n            setStats({users:res[0],profiles:res[1],matureProfiles:res[2]});\r\n            console.log({users:res[0],profiles:res[1],matureProfiles:res[2]})\r\n        })\r\n        \r\n\r\n    },[])\r\n  return(<div className={styl.Dashboard}>\r\n  <div><h2>Dashboard Test</h2></div>\r\n      <div>Users:<br/><span>{stats.users}</span></div>  <div>Profiles:<br/> <span>{stats.profiles}</span></div>  <div>Profiles older than 18:<br/> <span>{stats.matureProfiles}</span></div>\r\n    \r\n    </div>\r\n  );\r\n}","export const setUserAC = (User) => ({type:\"SET-USER\",user:User});\r\nexport const setProfilesAC = (profiles) => ({type:\"SET-PROFILES\",profiles:profiles});\r\nexport const setTokenAC = (token) => ({type:\"SET-TOKEN\",token:token});\r\n\r\n\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styl from \"./Login.module.css\";\r\nimport PropTypes from \"prop-types\";\r\nimport { setUserAC, setProfilesAC } from \"../../redux/actionCreators\";\r\nimport { connect } from \"react-redux\";\r\nimport { getProfiles } from \"../../App\";\r\n\r\nexport async function loginUser(credentials, method) {\r\n  return fetch(\"/api/login\", {\r\n    method: method,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(credentials),\r\n  }).then((data) => data.json());\r\n}\r\n\r\nexport async function regUser(credentials, method) {\r\n  return fetch(\"/api/register\", {\r\n    method: method,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(credentials),\r\n  }).then((data) => data.json());\r\n}\r\n\r\nfunction LoginMain(props) {\r\n  const [username, setUserName] = useState();\r\n  const [name, setName] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [role, setRole] = useState();\r\n  const [operation, setOperation] = useState();\r\n  useEffect(() => {\r\n    setOperation(\"Login\");\r\n    setRole(\"USER\")\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (operation === \"Register\") {\r\n      const regResponse = await regUser(\r\n        {\r\n          username,\r\n          password,\r\n          role,\r\n          name,\r\n        },\r\n        \"POST\"\r\n      );\r\n\r\n      if (regResponse === false) {\r\n        alert(\"Email already registered\");\r\n      }\r\n    }\r\n    const token = await loginUser(\r\n      {\r\n        username,\r\n        password,\r\n      },\r\n      \"POST\"\r\n    );\r\n    if (token[0].token) {\r\n      props.setToken(token[0]);\r\n      props.setUserAC({\r\n        email: username,\r\n        role: token[1],\r\n        token: token,\r\n      });\r\n      getProfiles(username).then((result) => {\r\n        props.setProfilesAC(result);\r\n      });\r\n    } else {\r\n      alert(\"Login failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styl.loginWrapper}>\r\n      <h1>Please Log In</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <p>Username</p>\r\n          <input type=\"text\" name=\"Username\" onChange={(e) => setUserName(e.target.value)} />\r\n        </label>\r\n        <label>\r\n          <p>Password</p>\r\n          <input\r\n            type=\"password\" name=\"Password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </label>\r\n        {operation === \"Register\" ? (\r\n          <div>\r\n            <label>\r\n              <p>Name</p>\r\n              <input type=\"text\"  onChange={(e) => setName(e.target.value)} />\r\n            </label>\r\n            <label>\r\n              <p>Role</p>\r\n              <select id=\"roles\" onChange={(e) => setRole(e.target.value)} name=\"roles\">\r\n                <option value=\"USER\">User</option>\r\n                <option value=\"ADMIN\">Admin</option>\r\n              </select>\r\n            </label>\r\n          </div>\r\n        ) : null}\r\n        <div>\r\n          <input\r\n            type=\"radio\"\r\n            checked={operation === \"Login\"}\r\n            id=\"operationChoice1\"\r\n            name=\"operation\"\r\n            onChange={(e) => setOperation(e.target.value)}\r\n            value=\"Login\"\r\n          />\r\n          <label htmlFor=\"operationChoice1\">Login</label>\r\n          <input\r\n            type=\"radio\"\r\n            checked={operation === \"Register\"}\r\n            id=\"operationChoice2\"\r\n            name=\"operation\"\r\n            onChange={(e) => setOperation(e.target.value)}\r\n            value=\"Register\"\r\n          />\r\n          <label htmlFor=\"operationChoice2\">Register</label>\r\n        </div>\r\n        <div>\r\n          <button className={styl.submitButton} type=\"submit\">Let's go</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nLoginMain.propTypes = {\r\n  setToken: PropTypes.func.isRequired,\r\n};\r\n\r\nlet mapStateToProps = (state, ownProps) => ({\r\n  state: state,\r\n  setToken: ownProps.setToken,\r\n});\r\nlet Login = connect(mapStateToProps, { setUserAC, setProfilesAC })(LoginMain);\r\nexport default Login;\r\n","import { Backspace, Check, Close, Pen, Trash } from 'css.gg';\r\nimport React,{useState, useEffect} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport { getProfiles } from '../../../App';\r\nimport {setProfilesAC} from '../../../redux/actionCreators'\r\nimport { profileChange } from './UserProfiles';\r\nimport styl from './UserProfiles.module.css'\r\n\r\n function ProfileBox(props) {\r\n    const [operation, setOperation] = useState();\r\n    const [name, setName] = useState();\r\n    const [surname, setSurname] = useState();\r\n    const [age, setAge] = useState();\r\n    \r\n    useEffect(() => {\r\n        setOperation(\"NONE\")\r\n        setName(props.name)\r\n        setSurname(props.surname)\r\n        setAge(props.age)\r\n      },[])\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        if(operation === 'EDIT'){\r\n            const changeProfileResult = await profileChange(\r\n                [{name,surname,age,author:props.author},{name:props.name,surname:props.surname,age:props.age,author:props.author}],\"PATCH\"\r\n            )\r\n\r\n            if(changeProfileResult===false){\r\n                alert(\"duplicate profile\")\r\n            }\r\n        getProfiles(props.currUser).then((result)=>{\r\n            props.setProfilesAC(result)\r\n            setOperation(\"NONE\")\r\n          })\r\n        \r\n        \r\n      }\r\n      else if(operation === 'DELETE'){\r\n        const changeProfileResult = await profileChange(\r\n            {name:props.name,surname:props.surname,age:props.age,author:props.author},\"DELETE\"\r\n        )\r\n\r\n        if(changeProfileResult===false){\r\n            alert(\"profile not deleted\")\r\n        }\r\n    getProfiles(props.currUser).then((result)=>{\r\n        props.setProfilesAC(result)\r\n        setOperation(\"NONE\")\r\n        \r\n      })\r\n    \r\n    \r\n  }\r\n  else if(operation === 'CANCEL'){\r\n        setName(props.name)\r\n        setAge(props.age)\r\n        setSurname(props.surname)\r\n        setOperation(\"NONE\")\r\n  }\r\n    }\r\n\r\n\r\n    //if((props.author===props.wantedUser && props.author===props.currUser.email)|| (props.author===props.wantedUser && props.currUser.role===\"ADMIN\")){\r\n    return(\r\n        <div className={styl.box}>\r\n        \r\n            <p><a><img alt={\"\"} src={'http://mymbs.co.id/public/upload/image/user/user.png'}></img></a></p>\r\n            <form onSubmit={handleSubmit} >\r\n            <span>Name: { operation===\"EDIT\" ?<textarea value={name} name=\"name\" onChange={e => setName(e.target.value)}/>:(props.name ? props.name: \"Loading\")}</span>\r\n            <span>Surname: {operation===\"EDIT\"? <textarea value={surname} onChange={e => setSurname(e.target.value)}/>: (props.surname ? props.surname: \"Loading\")}</span>\r\n            <span>Age: {operation===\"EDIT\"? <textarea type=\"number\" value={age} onChange={e => setAge(parseInt(e.target.value))}/>: ( props.age ? props.age: \"Loading\")}</span>\r\n            {operation===\"DELETE\" ? (<span>Are You sure?<br/></span>) : null}\r\n            <div>\r\n            {operation!==\"NONE\" ? <button type=\"submit\" name=\"okay\"><Check/>Okay</button> :null}\r\n            {operation!==\"NONE\" ? null : <button value=\"EDIT\" name=\"edit\" onClick={e=>setOperation(e.target.value)}><Pen/>Edit</button>}\r\n            {operation!==\"NONE\" ? null : <button value=\"DELETE\" name=\"delete\" onClick={e=>setOperation(e.target.value)}><Trash/>Delete</button>}\r\n            {operation!==\"NONE\" ? <button type=\"submit\" value=\"CANCEL\" onClick={e => setOperation(e.target.value)}><Close/> Cancel</button> : null}\r\n            </div>\r\n            </form>\r\n        </div>\r\n\r\n    )\r\n   // }\r\n   // else return(null)\r\n}\r\n\r\nlet mapStateToProps = (state,ownProps) => ({\r\n\r\n}) \r\n \r\nlet ProfileBoxHOC = connect(mapStateToProps,{setProfilesAC})(ProfileBox)\r\nexport default  ProfileBoxHOC;\r\n","import { connect } from \"react-redux\"\r\nimport React, { useEffect, useState } from 'react'\r\nimport {setProfilesAC} from './../../../redux/actionCreators'\r\n\r\nimport { getProfiles } from \"../../../App\"\r\n\r\nimport styl from './UserProfiles.module.css'\r\nimport ProfileBoxHOC from \"./ProfileBox\"\r\nimport { Add, Check, Close, MathPlus } from \"css.gg\"\r\n\r\n\r\nexport async function profileChange(profile,method) {\r\n    return fetch('/api/profiles', {\r\n      method: method,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(profile)\r\n    })\r\n      .then(data => data.json())\r\n   }\r\n\r\n\r\nfunction UserProfiles(props){\r\n    const [operation, setOperation] = useState();\r\n    const [name, setName] = useState();\r\n    const [surname, setSurname] = useState();\r\n    const [age, setAge] = useState();\r\n    \r\n    let username=(props.wantedUser? props.wantedUser: props.currUser.email);\r\n\r\n    useEffect(() => {\r\n        props.setProfilesAC([])\r\n            if(props.wantedUser){\r\n                getProfiles(props.wantedUser).then(profiles =>{\r\n\r\n                    props.setProfilesAC(profiles)\r\n                })\r\n                \r\n\r\n            }\r\n            else{\r\n\r\n                getProfiles(props.currUser.email).then(profiles =>{\r\n\r\n                    props.setProfilesAC(profiles)\r\n                })\r\n            }\r\n    },[username])\r\n\r\n    const handleSubmit = async e => {\r\n        \r\n        e.preventDefault();\r\n        if(operation ===\"ADD\"){\r\n            const addProfileResult = await profileChange(\r\n                {name,surname,age,author:(props.wantedUser ? props.wantedUser : props.currUser.email)},\"PUT\"\r\n            )\r\n\r\n            if(addProfileResult===false){\r\n                alert(\"duplicate profile\")\r\n            }\r\n            getProfiles(username).then((result)=>{\r\n                props.setProfilesAC(result)\r\n                setOperation(\"NONE\")\r\n              })\r\n        }\r\n      }\r\n\r\n    \r\n        \r\n       \r\n     \r\n    let userboxes = [...props.profileList].map(el => <ProfileBoxHOC  key={el._id} currUser={(props.wantedUser ? props.wantedUser : props.currUser.email)} name={el.name} surname={el.surname} age={el.age} author={el.author}/>)\r\nreturn(\r\n    <div>\r\n        <div className={styl.Userboard}>\r\n        <div>\r\n        Welcome, {props.currUser.email}!<br/>\r\n        Browsing, {(props.wantedUser ? props.wantedUser : props.currUser.email)} profiles </div>\r\n\r\n        \r\n        {operation === \"ADD\" ? <form onSubmit={handleSubmit} >\r\n        <label>\r\n          <p>Name</p>\r\n          <input type=\"text\" name='name' onChange={e => setName(e.target.value)}/>\r\n        </label>\r\n        <label>\r\n          <p>Surname</p>\r\n          <input type=\"text\" name='surname' onChange={e => setSurname(e.target.value)}/>\r\n        </label>\r\n        <label>\r\n          <p>Age</p>\r\n          <input type=\"number\" name='age' onChange={e => setAge(parseInt(e.target.value))}/>\r\n        </label>\r\n        <div>\r\n          <button type=\"submit\" className={styl.submitButton}>Submit</button>\r\n          <button className={styl.submitButton} onClick={()=>{setOperation(\"NONE\")}}>Cancel</button>\r\n        </div>\r\n      </form> : <button className={styl.addButton} id=\"ADD\"  value=\"ADD\" onClick={e => setOperation(e.target.value)}><Add/>Add Profile</button> }\r\n          </div>\r\n        <div className={styl.boxGrid}>{userboxes}</div>\r\n    </div>\r\n)\r\n\r\n}\r\n\r\nlet mapStateToProps = (state,ownProps) => {\r\n    \r\n        return({\r\n            currUser:state.authData.currUser, \r\n            profileList:state.profileData.currProfiles\r\n        })\r\n    }\r\n    \r\n\r\n\r\n\r\nlet ContainerUserProfiles = connect(mapStateToProps,{setProfilesAC})(UserProfiles)\r\nexport default ContainerUserProfiles ","import React,{useEffect, useState} from 'react';\r\nimport ContainerUserProfiles from './userprofiles/UserProfiles';\r\nimport {useLocation} from 'react-router-dom'\r\n\r\n\r\nexport default function Userboard(props) {\r\n    \r\n  return(<div >\r\n  \r\n    <ContainerUserProfiles wantedUser={props.state.authData.currUser ? props.state.authData.currUser.email : null} />\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport function AdminUserboard(props) {\r\n    let location = useLocation();\r\n\r\n      const [wantedUser, setWantedUser] = useState();\r\n      useEffect(()=>{\r\n        setWantedUser(location.state.wantedProfile)\r\n      },[])\r\n      \r\n    return(\r\n        <div>\r\n\r\n    <ContainerUserProfiles wantedUser={wantedUser ? wantedUser : null} />\r\n    </div>\r\n    )\r\n}","import { Controller, Eye, Home, LogOff, LogOut } from 'css.gg'\r\nimport React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport styl from './Header.module.css'\r\n\r\nexport default  function Header(props){\r\n    return(\r\n        <div className={styl.Header}>\r\n        <div className={styl.User}><img className={props.currUser.role === 'ADMIN' ? styl.adminPhoto : styl.userPhoto} alt={\"\"} src={\"http://mymbs.co.id/public/upload/image/user/user.png\"}></img><p>{props.currUser.email}</p></div>\r\n        <div className={styl.Buttons}>\r\n        <NavLink to={{\r\n   pathname:'/',\r\n   state: {wantedProfile:props.currUser.email}  \r\n }}><Home/>Home</NavLink>\r\n            \r\n            {props.currUser.role === 'ADMIN' ? <NavLink to=\"/control\"><Eye/>Control</NavLink>:null}\r\n            <a onClick={()=>{props.clearToken()}}><LogOff/>Log Out</a>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n\r\n    \r\n\r\n\r\n}","import React,{ useEffect, useState} from 'react';\r\nimport {connect} from 'react-redux'\r\nimport {fetchUsers} from './ControlPanel'\r\nimport styl from './../userboard/userprofiles/UserProfiles.module.css'\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Check, Close, Pen, Trash } from 'css.gg'\r\n\r\n\r\nfunction UserBox(props) {\r\n     \r\n    const [operation, setOperation] = useState();\r\n    const [name, setName] = useState();\r\n    const [mail, setMail] = useState();\r\n    const [role, setRole] = useState();\r\n    \r\n    useEffect(() => {\r\n        setOperation(\"NONE\")\r\n        setName(props.user.name)\r\n        setMail(props.user.email)\r\n        setRole(props.user.role)\r\n      },[])\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        if(operation === 'EDIT'){\r\n            const changeUserResult = await fetchUsers(\r\n                \"PATCH\", [{name,email:mail,role},{name:props.user.name,email:props.user.email,role:props.user.role}]\r\n            )\r\n\r\n            if(changeUserResult===false){\r\n                alert(\"duplicate user\")\r\n            }\r\n            fetchUsers(\"POST\").then((result)=>{\r\n            \r\n            props.setUsers(result) })\r\n            setOperation(\"NONE\")\r\n         \r\n        \r\n        \r\n      }\r\n      else if(operation === 'DELETE'){\r\n        const changeUserResult = await fetchUsers(\r\n            \"DELETE\", {name:props.user.name,email:props.user.email,role:props.user.role}\r\n        )\r\n\r\n        if(changeUserResult===false){\r\n            alert(\"profile not deleted\")\r\n        }\r\n        fetchUsers().then((result)=>{\r\n            setOperation(\"NONE\")\r\n            props.setUsers(result)\r\n            \r\n          })\r\n    \r\n    \r\n  }\r\n  else if(operation === 'CANCEL'){\r\n        setName(props.user.name)\r\n        setMail(props.user.email)\r\n        setRole(props.user.role)\r\n        setOperation(\"NONE\")\r\n  }\r\n    }\r\n\r\n\r\n\r\n   if(props.currUser.role === 'ADMIN'){\r\n  return(<div className={styl.box}>\r\n        <p>\r\n        <NavLink to={{\r\n   pathname:'/userprofiles',\r\n   state: {wantedProfile:props.user.email}  \r\n }}><img alt={\"\"} src={'http://mymbs.co.id/public/upload/image/user/user.png'}></img></NavLink></p>\r\n    <form onSubmit={handleSubmit} >\r\n    <span>Name: { operation===\"EDIT\" ?<textarea value={name} onChange={e => setName(e.target.value)}/>:(props.user? props.user.name: \"Loading\")}</span>\r\n    <span>Mail: {operation===\"EDIT\"? <textarea value={mail} onChange={e => setMail(e.target.value)}/>: (props.user ? props.user.email: \"Loading\")}</span>\r\n    <span>Role: {operation===\"EDIT\"? <select  id=\"roles\" onChange={(e) => setRole(e.target.value)} name=\"roles\">\r\n                <option value=\"USER\">USER</option>\r\n                <option value=\"ADMIN\">ADMIN</option>\r\n              </select>: ( props.user ? props.user.role: \"Loading\")}</span>\r\n    {operation===\"DELETE\" ? (<span>Are You sure?<br/></span>) : null}\r\n    <div>\r\n    {operation!==\"NONE\" ? <button type=\"submit\" name=\"okay\"><Check/>Okay</button> :null}\r\n    {operation!==\"NONE\" ? null : <button value=\"EDIT\" onClick={e=>setOperation(e.target.value)}><Pen/>Edit</button>}\r\n    {operation!==\"NONE\" ? null : <button value=\"DELETE\" name=\"delete\" onClick={e=>setOperation(e.target.value)}><Trash/>Delete</button>}\r\n    {operation!==\"NONE\" ? <button type=\"submit\" value=\"CANCEL\" onClick={e => setOperation(e.target.value)}><Close/> Cancel</button> : null}\r\n    </div>\r\n    </form>\r\n</div>\r\n  );\r\n   }\r\n   else return (<span>You have no access to this data.</span>)\r\n}\r\n\r\nlet mapStateToProps = (state,ownProps) => ({\r\n    currUser:state.authData.currUser\r\n\r\n})\r\n\r\nlet UserBoxHOC =connect(mapStateToProps,{})(UserBox)\r\nexport default UserBoxHOC\r\n","import React, { useEffect, useState } from 'react';\r\nimport {connect} from 'react-redux'\r\nimport UserBoxHOC from './UserBox';\r\nimport styl from './../userboard/userprofiles/UserProfiles.module.css'\r\nimport Dashboard from '../dashboard/Dashboard';\r\n\r\nexport async function fetchUsers(method,user=null) {\r\n \r\n  return fetch('/api/admin', {\r\n    method: method,\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({user})\r\n  })\r\n    .then(data => data.json()).catch(err =>{return err})\r\n }\r\n\r\n\r\n function ControlPanel(props) {\r\n  \r\n   const [Users,setUsers]=useState();\r\n   useEffect(()=>{\r\n     setUsers([])\r\n      const getUserList = fetchUsers(\"POST\").then(result =>{\r\n\r\n        setUsers(result)\r\n\r\n\r\n      })\r\n\r\n   },[])\r\n   if(props.currUser.role === 'ADMIN' && Users){\r\n     \r\n     let UserList = [...Users].map((e,i) => <UserBoxHOC key={Users[i]._id} setUsers={setUsers} user={Users[i]}/>)\r\n  return(<div>\r\n    \r\n   \r\n    <Dashboard/>\r\n    <div className={styl.boxGrid}>{UserList}</div>\r\n    </div>\r\n  );\r\n   }\r\n   else return (<span>You have no access to this page.</span>)\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n  currUser:state.authData.currUser\r\n\r\n})\r\n\r\nlet ControlPanelHOC =connect(mapStateToProps,{})(ControlPanel)\r\nexport default ControlPanelHOC","import React, { useEffect } from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport './App.css';\nimport Dashboard from './components/dashboard/Dashboard';\nimport Login from './components/login/Login';\nimport useToken from './hooks/useToken';\nimport Userboard,{AdminUserboard} from './components/userboard/Userboard';\nimport {connect } from 'react-redux';\nimport { setTokenAC, setUserAC, setProfilesAC } from './redux/actionCreators';\nimport Header from './components/header/Header';\nimport ControlPanelHOC from './components/controlpanel/ControlPanel';\n\n\nasync function fetchUser(token) {\n\n  return fetch('/api/login', {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(token)\n  })\n    .then(data => data.json()).catch(err =>{return err})\n }\n\nfunction loadUserFromToken(token){\n  return fetchUser(token).then((result,err)=>{\n    \n    if (!err){\n\n    \n    return result\n    }\n    else {\n      return false\n    }\n    \n    \n  })\n\n  \n}\n\nexport async function  getProfiles(email){\n  return fetch('/api/profiles', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({email:email})\n  })\n    .then(data => data.json())\n}\n\n\n\n\nfunction AppMain(props) {\n \n  const { token, setToken, clearToken, renewToken, getToken } = useToken();\n  useEffect(()=>{\n      if(token){\n      loadUserFromToken(getToken()).then((result)=>{\n        if(!result.token){\n          clearToken()\n        }\n        else{\n\n          props.setUserAC(result)\n          props.setTokenAC(renewToken(result.token,result.email))\n\n          getProfiles(result.email).then((result)=>{\n            props.setProfilesAC(result)\n          })\n          \n          \n        }\n      })\n\n      \n    }\n      },[]\n  )\n \n  if (token && token.expiry < (new Date()).getTime()) {\n    clearToken()\n  }\n  if(!token ) {\n    \n    return <Login  setToken={setToken} />\n  }\n  else{\n\n    \n  return (\n    \n      <div className=\"wrapper\">\n        \n        \n        <BrowserRouter>\n          <Header currUser={props.state.authData.currUser} clearToken={clearToken}/>\n          <Switch>\n          <Route exact path=\"/\">\n              <Userboard  state={props.state}  clearToken={clearToken} />\n            </Route>\n            <Route path=\"/dashboard\">\n              <Dashboard />\n            </Route>\n            <Route path=\"/control\">\n              <ControlPanelHOC />\n            </Route>\n            <Route path=\"/userprofiles\">\n              <AdminUserboard />\n            </Route>\n          </Switch>\n        </BrowserRouter>\n        \n      </div>\n      \n    );\n  }\n}\n\nlet mapStateToProps = (state) =>({\n  state:state\n})\n\nconst App = connect(mapStateToProps,{setUserAC,setTokenAC,setProfilesAC})(AppMain)\nexport default App;\n","import { useState } from 'react';\r\nimport { loginUser } from '../components/login/Login';\r\n\r\nexport default function useToken() {\r\n  const getToken = () => {\r\n    const tokenString = localStorage.getItem('token');\r\n    const userToken = JSON.parse(tokenString);\r\n    return userToken\r\n  };\r\n\r\n  const [token, setToken] = useState(getToken());\r\n\r\n  const saveToken = userToken => {\r\n    localStorage.setItem('token', JSON.stringify(userToken));\r\n    setToken(userToken);\r\n  };\r\n  const deleteToken = () => {\r\n      localStorage.removeItem('token');\r\n      setToken();\r\n  }\r\n  const renewToken = (token,email)=>{\r\n    loginUser({email},\"PUT\").then((result)=>{\r\n        setToken(result)\r\n        localStorage.setItem('token', JSON.stringify(result));\r\n\r\n        return result\r\n    })\r\n}\r\n  return {\r\n    \r\n    setToken: saveToken,\r\n    clearToken: deleteToken,\r\n    renewToken: renewToken,\r\n    getToken: getToken,\r\n    token\r\n  }\r\n\r\n\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const SET_USER = \"SET-USER\"\r\nconst SET_TOKEN = \"SET-TOKEN\"\r\n\r\nlet defaultUsers = {\r\n\r\n    currUser:{\r\n            \r\n            },\r\n           \r\n            \r\n          \r\n\r\n\r\n    \r\n}\r\n\r\n\r\n\r\nexport const authReducer = (state=defaultUsers,action)=>{\r\n    \r\n    \r\n    switch(action.type){\r\n        case SET_USER:\r\n\r\n            \r\n            \r\n                return({\r\n                    ...state,currUser: action.user\r\n                })\r\n                \r\n        case SET_TOKEN:\r\n\r\n                        return({\r\n                            ...state,currUser: {...state.currUser,token:{...action.token}}\r\n                        })\r\n                    \r\n        default:\r\n            return state\r\n\r\n    }\r\n    \r\n    \r\n\r\n\r\n}\r\nexport default authReducer;","const SET_PROFILES = \"SET-PROFILES\"\r\n\r\nlet defaultProfiles = {\r\n\r\n    currProfiles:[]\r\n            \r\n            \r\n           \r\n            \r\n          \r\n\r\n\r\n    \r\n}\r\n\r\n\r\n\r\nexport const profileReducer = (state=defaultProfiles,action)=>{\r\n    \r\n   \r\n    switch(action.type){\r\n        case SET_PROFILES:\r\n\r\n                return({\r\n                    ...state,currProfiles: [...action.profiles]\r\n                })\r\n            \r\n        default:\r\n            return state\r\n\r\n    }\r\n    \r\n    \r\n\r\n\r\n}\r\nexport default profileReducer;","import { combineReducers, createStore } from \"redux\";\r\nimport authReducer from \"./authReducer\";\r\nimport profileReducer from \"./profilesReducer\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet reducers = combineReducers({\r\n    authData: authReducer,\r\n    profileData: profileReducer\r\n})\r\n\r\nlet store = createStore(reducers);\r\n\r\n\r\n\r\n\r\nexport default store","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport store from  './redux/redux-store'\nimport { Provider } from 'react-redux';\n\n\nReactDOM.render(\n  <Provider store={store}>\n  <App state={store.getState()} dispatch={store.dispatch.bind(store)} />\n  </Provider>\n  ,\n  document.getElementById('root')\n  \n);\n\n\nreportWebVitals();\n"],"sourceRoot":""}